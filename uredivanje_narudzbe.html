<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <!--DATE PICKER DATUM NARUDŽBE i VRIJEME DOSTAVE-->
    <!-- Include Bootstrap CSS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Include Flatpickr CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
      rel="stylesheet"
    />
    <!--STYLE.CSS-->
    <!--<link rel="stylesheet" href="./.css" />-->
  </head>
  <body>
    <div class="container-fluid">
      <!--NAVBAR-->
      <div class="container-fluid">
        <header class="d-flex py-3">
          <a class="navbar-brand float-left" href="index.html">
            <img src="./asstes/logo.png" alt="Logo" height="30" />
          </a>
          <ul class="nav mx-auto">
            <li class="nav-item">
              <a href="index.html" class="nav-link active" aria-current="page"
                >Nova narudžba</a
              >
            </li>
            <li class="nav-item">
              <a href="narudzbe.html" class="nav-link" aria-current="page"
                >Sve narudžbe</a
              >
            </li>
            <li class="nav-orders-items">
              <a href="narudzbe-items.html" class="nav-link" aria-current="page"
                >Proizvodi prema narudžbama</a
              >
            </li>
            <li class="nav-item">
              <a href="novi_korisnik.html" class="nav-link">Novi korisnik</a>
            </li>
            <li class="nav-item">
              <a
                href="uredivanje_narudzbe.html"
                class="nav-link"
                aria-current="page"
                >Uređivanje narudžbe</a
              >
            </li>

            <li class="nav-item"></li>
          </ul>
          <ul>
            <div class="row mb-3">
              <div class="col">
                <input
                  type="text"
                  class="form-control border-warning border-2 text-dark text-center"
                  name="guid"
                  id="guid"
                  list="list-salesman"
                  value=""
                  required
                />
              </div>
            </div>
          </ul>
        </header>
      </div>
    </div>
    <!--NAVBAR-->

    <div class="container-fluid" id="main-container">
      <div class="container-fluid" id="formOrderData-container">
        <!--FORMA-->
        <form id="orderForm">
          <!--ID NARUDŽBE-->
          <div class="row my-3">
            <label
              class="input-group-text col-sm-3 col-form-label"
              for="narudzba_id"
              >NARUDŽBA</label
            >

            <div class="col">
              <input
                class="form-control"
                id="narudzba_id_"
                name="narudzba_id"
                required=""
                type="text"
              />
            </div>
          </div>
          <!--PRODAVAČ-->

          <div class="row mb-3">
            <label
              class="input-group-text col-sm-3 col-form-label"
              for="prodavac"
              >Prodavač</label
            >

            <div class="col">
              <input
                class="form-control"
                id="prodavac"
                list="list-salesman"
                name="prodavac"
                required=""
                type="text"
              />
            </div>
          </div>
          <!--NARUČITELJ-->

          <div class="row mb-3">
            <label
              class="input-group-text col-sm-3 col-form-label"
              for="narucitelj"
              >Naručitelj</label
            >

            <div class="col">
              <input
                class="form-control"
                id="narucitelj"
                list="list-clients"
                name="narucitelj"
                required=""
                type="text"
              />
            </div>
          </div>
          <!--DATUM KREIRANJE NARUDŽBE-->

          <div class="row mb-3">
            <label
              class="input-group-text col-sm-3 col-form-label"
              for="datumNarudzbe"
              >Datum narudžbe</label
            >

            <div class="col">
              <input
                class="form-control datum"
                id="datumNarudzbe"
                name="datumNarudzbe"
                type="date"
                value=""
                pattern="\d{4}-\d{2}-\d{2}"
              />
            </div>
          </div>
          <!--DATUM DOSTAVE-->

          <div class="row mb-3">
            <label
              class="input-group-text col-sm-3 col-form-label"
              for="datum-dostave"
              >Datum dostave</label
            >

            <div class="col">
              <input
                class="form-control datum"
                id="datumDostave"
                name="datumDostave"
                type="date"
                value=""
                pattern="\d{4}-\d{2}-\d{2}"
              />
            </div>
          </div>
          <!--TABLICA-->

          <table class="table mt-3" id="tablica">
            <thead>
              <tr>
                <th class="col-7">Naziv Artikla</th>
                <th class="col-2">Količina</th>
                <th class="col-2">Cijena</th>
                <th class="col-1"></th>
                <th class="col-0" type="hidden"></th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
          <!--BUTTON DODAJTE ARTIKL--><a
            class="btn btn-success mr-3"
            id="addRow"
            role="button"
          >
            <svg
              class="bi bi-plus-lg"
              fill="currentColor"
              height="16"
              viewbox="0 0 16 16"
              width="16"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"
                fill-rule="evenodd"
              ></path>
            </svg>
          </a>
        </form>
      </div>
      <!--BUTTON SUBMIT TABLE ITEMS-->

      <div class="row mt-3 mr-1 float-right">
        <button class="btn btn-primary" id="button-submit" type="submit">
          Spremi promjene
        </button>
      </div>
      <!--KRAJ FORME-->
    </div>
    <!--LISTA PRODAVAČA-->

    <p>
      <datalist id="list-salesman">
        <option>Ivan Horvat</option>
        <option>Marko Horvat</option>
      </datalist>
      <!--LISTA PRODUKTA-->
      <datalist id="list-products"> </datalist>
      <!--LISTA KLIJENTA-->
      <datalist id="list-clients"> </datalist>
      <!--LISTA Adresa-->
      <datalist id="list-address"></datalist>
      <script src="uredivanje_narudzbe.js" charset="UTF-8"></script>
      <!-- Include Bootstrap and Flatpickr JavaScript DATUM NARUDŽBE-->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
      <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"
      ></script>
      <script>
        // Initialize Flatpickr with the desired options
        // flatpickr(".datum", {
        //   dateFormat: "d-m-Y",
        //   allowInput: true, // Allow manual input
        // });

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Populate data from "https://demo.cadcam-group.eu/api" to NARUČITELJ
        // Definiranje funkciju za popunjavanje option liste
        function popuniOptionListuNarucitelj(data) {
          const datalist = document.getElementById("list-clients");

          // Prolazimo kroz dobivene podatke i dodajemo ih kao opcije u datalist
          data.forEach((client) => {
            const option = document.createElement("option");
            option.value = client.ime + " - " + client.adresa;
            datalist.appendChild(option);
          });
        }

        // Definirajte podatke za POST zahtjev
        const postDataNarucitelji = [
          {
            action: "Klijenti",
          },
        ];

        // POST zahtjev na API endpoint
        fetch("https://demo.cadcam-group.eu/api/", {
          method: "POST",
          body: JSON.stringify(postDataNarucitelji),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            // Pozivamo funkciju za popunjavanje option liste s dobivenim podacima
            popuniOptionListuNarucitelj(data);
          })
          .catch((error) => {
            console.error("Došlo je do pogreške:", error);
          });

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Populate data from "https://demo.cadcam-group.eu/api" to PRODAVAČ
        // Definiranje funkcije za popunjavanje option liste
        function popuniOptionListuProdavac(data) {
          const datalistProdavac = document.getElementById("list-salesman");
          // Prolazimo kroz dobivene podatke i dodajemo ih kao opcije u datalist
          data.forEach((client) => {
            const optionProdavac = document.createElement("option");
            optionProdavac.value = client.ime + " " + client.prezime;
            datalistProdavac.appendChild(optionProdavac);
          });
        }
        // Definiranje podataka za POST zahtjev
        const postDataProdavac = [
          {
            action: "Prodavaci",
          },
        ];
        // POST zahtjev na API endpoint
        fetch("https://demo.cadcam-group.eu/api/", {
          method: "POST",
          body: JSON.stringify(postDataProdavac),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            // Pozivamo funkciju za popunjavanje option liste s dobivenim podacima
            popuniOptionListuProdavac(data);
          })
          .catch((error) => {
            console.error("Došlo je do pogreške:", error);
          });
      </script>
    </p>
  </body>
</html>
